name = "worker-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"] # Required for SimpleWebAuthn's crypto module

[vars]
ENVIRONMENT = "production"
RP_ID = "lifestyle-platform.com"
RP_NAME = "Lifestyle Platform"
ORIGIN = "https://lifestyle-platform.com" # Production origin

[[d1_databases]]
binding = "DB"
database_name = "lifestyle-platform-db"
database_id = "ecb7d78a-979a-4fc9-a05e-18ecde5c080e" # Replace with actual ID

[[r2_buckets]]
binding = "R2_BUCKET"
bucket_name = "lifestyle-platform-media"

[[kv_namespaces]]
binding = "KV_CONFIG"
id = "YOUR_KV_CONFIG_ID_HERE" # Replace with actual ID

[[kv_namespaces]]
binding = "KV_TRUST_SCORES"
id = "YOUR_KV_TRUST_SCORES_ID_HERE" # Replace with actual ID

[[kv_namespaces]]
binding = "KV_USERS" # To store WebAuthn authenticators and challenges
id = "YOUR_KV_USERS_ID_HERE" # Replace with actual ID

# Durable Object Bindings
#[[durable_objects.bindings]]
#name = "SESSION_MANAGER"
#class_name = "SessionManager"

[durable_objects]
bindings = [
  { name = "SESSION_MANAGER", class_name = "SessionManager" }
]

# This is what the warning was asking for:
[[migrations]]
tag = "v1"
new_classes = [ "SessionManager" ]